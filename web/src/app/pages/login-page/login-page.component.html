<app-common-page-header></app-common-page-header>
<div class="container">
  <div class="form-container">
    <h2 class="mat-title">Login</h2>
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput data-cy="username" type="text" [(ngModel)]="username" name="username" placeholder="email"
        (keydown.enter)="login()">
    </mat-form-field>

    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Password</mat-label>
      <input matInput data-cy="password" type="password" [(ngModel)]="password" name="password" placeholder="password"
        (keydown.enter)="login()">
    </mat-form-field>

    <div style="display: flex; align-items: center">
      <div class="forgot-password">
        <a data-cy="forgot-password-link" [routerLink]="['/forget-password']">Did you forget
          your password?</a>
      </div>
      <div style="flex-grow: 1"></div>
      <button mat-flat-button color='primary' data-cy="submit" (click)="login()" [disabled]="working">
        <span *ngIf="working">
          <i class="fas fa-spin fa-cog fa-fw"></i>
          Trying to login
        </span>
        <span *ngIf="!working">
          Login
        </span>
      </button>
    </div>

    <div *ngIf="loginReason">
      <div class="input-splitter"></div>
      <div class="row row--error">Please login again: {{loginReason}}</div>
    </div>

    <div *ngIf="showError">
      <div class="input-splitter"></div>
      <div class="row row--error">
        Unable to login, an error occured, please try again</div>
    </div>
  </div>
</div>

<app-common-page-footer></app-common-page-footer>
